var app = app || {};

(function(body){
    "use strict";

    app = {
        
        init: function() {
            this.change.init();
            this.update.init();
            this.fixmenu.init();
        }

    };

})(document.body);
var app = app || {};

(function(body){
    "use strict";

    app.change = {
        
        change: function($button) {
            var checked = false;

            if ($('#table').find('.j-change-item').filter(':checked').length) {
                checked = true;
            }
            
            $button.prop('disabled', !checked);
        },

        init: function() {
            var $table = $('#table'), $button = $('.j-change-button'), $checkbox = $table.find('.j-change-item');
            var _this = this;
            
            $table.find('.j-change-all').on('change', function() {
                $checkbox.prop('checked', $(this).prop('checked'));
                _this.change($button);
            });
            
            $table.find('.j-change-item').on('change', function() {
                _this.change($button);
            });

            _this.change($button);
        }

    };

})(document.body);
var app = app || {};

(function(body){
    "use strict";

    app.fixmenu = {
        
        fixMenu: function($menu, t) {

            if (t >= (159)) {
                if (!$menu.hasClass('_sticked')) {
                    $menu.addClass('_sticked');
                }
            }
            else {
                if ($menu.hasClass('_sticked')) {
                    $menu.removeClass('_sticked');
                }
            }
            
        },

        init: function() {
            var $element = $('#navigation'),
                that = this;

            that.fixMenu($element, $(window).scrollTop());

            $(window).on('scroll', function(){
                that.fixMenu($element, $(window).scrollTop());
            });
        }

    };

})(document.body);
var app = app || {};

(function(body){
    "use strict";

    app.update = {
        
        changeStatus: function($status, $row, responce) {
            var text = '<span class="table__error">Err</span>', status = false;

            if (responce.hasOwnProperty('http_code')) {
                if (responce.http_code == 200) {
                    status = true;
                    text = '<span class="table__success">Ok</span>';
                }
            }

            if (status) {
                $row.addClass('_active');
            }
            else {
                $row.addClass('_failed');
            }

            $status.html(text);
        },

        changeButton: function() {
            $('body').on('click', '.j-update-all', function(){
                $('#table').find('.j-change-item').filter(':checked').each(function(){
                    $(this).closest('tr').find('.j-update').trigger('click');
                });
            });
        },

        init: function() {
            var _this = this;

            _this.changeButton();

            $('body').on('click', '.j-update', function(){

                (function($button) {
                    var $button, $row, $status, action, domain;

                    $button.addClass('_active');

                    // #
                    $row = $button.closest('tr');

                    // #
                    $status = $row.find('.j-status');

                    // #
                    action = $button.attr('href');
                    domain = $button.data('domain');

                    $.ajax({
                        url: action,
                        type: 'GET',
                        dataType: 'JSON',
                        contentType: false,
                        processData: true,
                        success: function(responce){
                            $row.find('.j-change-item').prop('checked', false);

                            console.log("suc:", responce);

                            $button.removeClass('_active');
                            $button.addClass('_success');
                            
                            _this.changeStatus($status, $row, responce);
                        },
                        error: function(responce){
                            console.log("err:", responce);

                            $button.removeClass('_active');
                            $button.addClass('_failed');

                            _this.changeStatus($status, $row, responce);
                        }
                    });
                })($(this));

            });
        }

    };

})(document.body);
"use strict";

$(document).ready(function() {
    app.init();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLmpzIiwiX2FwcC5jaGFuZ2UuanMiLCJfYXBwLmZpeG1lbnUuanMiLCJfYXBwLnVwZGF0ZS5qcyIsIl9mdW5jdGlvbnMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6RkE7QUFDQTtBQ0RBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFwcCB8fCB7fTtcblxuKGZ1bmN0aW9uKGJvZHkpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYXBwID0ge1xuICAgICAgICBcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZS5pbml0KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZS5pbml0KCk7XG4gICAgICAgICAgICB0aGlzLmZpeG1lbnUuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59KShkb2N1bWVudC5ib2R5KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xuXG4oZnVuY3Rpb24oYm9keSl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhcHAuY2hhbmdlID0ge1xuICAgICAgICBcbiAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigkYnV0dG9uKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoJCgnI3RhYmxlJykuZmluZCgnLmotY2hhbmdlLWl0ZW0nKS5maWx0ZXIoJzpjaGVja2VkJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRidXR0b24ucHJvcCgnZGlzYWJsZWQnLCAhY2hlY2tlZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRhYmxlID0gJCgnI3RhYmxlJyksICRidXR0b24gPSAkKCcuai1jaGFuZ2UtYnV0dG9uJyksICRjaGVja2JveCA9ICR0YWJsZS5maW5kKCcuai1jaGFuZ2UtaXRlbScpO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHRhYmxlLmZpbmQoJy5qLWNoYW5nZS1hbGwnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlKCRidXR0b24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICR0YWJsZS5maW5kKCcuai1jaGFuZ2UtaXRlbScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jaGFuZ2UoJGJ1dHRvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX3RoaXMuY2hhbmdlKCRidXR0b24pO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59KShkb2N1bWVudC5ib2R5KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xuXG4oZnVuY3Rpb24oYm9keSl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhcHAuZml4bWVudSA9IHtcbiAgICAgICAgXG4gICAgICAgIGZpeE1lbnU6IGZ1bmN0aW9uKCRtZW51LCB0KSB7XG5cbiAgICAgICAgICAgIGlmICh0ID49ICgxNTkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkbWVudS5oYXNDbGFzcygnX3N0aWNrZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkbWVudS5hZGRDbGFzcygnX3N0aWNrZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJG1lbnUuaGFzQ2xhc3MoJ19zdGlja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJG1lbnUucmVtb3ZlQ2xhc3MoJ19zdGlja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKCcjbmF2aWdhdGlvbicpLFxuICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGF0LmZpeE1lbnUoJGVsZW1lbnQsICQod2luZG93KS5zY3JvbGxUb3AoKSk7XG5cbiAgICAgICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aGF0LmZpeE1lbnUoJGVsZW1lbnQsICQod2luZG93KS5zY3JvbGxUb3AoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxufSkoZG9jdW1lbnQuYm9keSk7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcblxuKGZ1bmN0aW9uKGJvZHkpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYXBwLnVwZGF0ZSA9IHtcbiAgICAgICAgXG4gICAgICAgIGNoYW5nZVN0YXR1czogZnVuY3Rpb24oJHN0YXR1cywgJHJvdywgcmVzcG9uY2UpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gJzxzcGFuIGNsYXNzPVwidGFibGVfX2Vycm9yXCI+RXJyPC9zcGFuPicsIHN0YXR1cyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uY2UuaGFzT3duUHJvcGVydHkoJ2h0dHBfY29kZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbmNlLmh0dHBfY29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICc8c3BhbiBjbGFzcz1cInRhYmxlX19zdWNjZXNzXCI+T2s8L3NwYW4+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAkcm93LmFkZENsYXNzKCdfYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcm93LmFkZENsYXNzKCdfZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzdGF0dXMuaHRtbCh0ZXh0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBjaGFuZ2VCdXR0b246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuai11cGRhdGUtYWxsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkKCcjdGFibGUnKS5maW5kKCcuai1jaGFuZ2UtaXRlbScpLmZpbHRlcignOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgndHInKS5maW5kKCcuai11cGRhdGUnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBfdGhpcy5jaGFuZ2VCdXR0b24oKTtcblxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuai11cGRhdGUnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCRidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRidXR0b24sICRyb3csICRzdGF0dXMsIGFjdGlvbiwgZG9tYWluO1xuXG4gICAgICAgICAgICAgICAgICAgICRidXR0b24uYWRkQ2xhc3MoJ19hY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAjXG4gICAgICAgICAgICAgICAgICAgICRyb3cgPSAkYnV0dG9uLmNsb3Nlc3QoJ3RyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gI1xuICAgICAgICAgICAgICAgICAgICAkc3RhdHVzID0gJHJvdy5maW5kKCcuai1zdGF0dXMnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAjXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9ICRidXR0b24uYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgICAgICBkb21haW4gPSAkYnV0dG9uLmRhdGEoJ2RvbWFpbicpO1xuXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdKU09OJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uY2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3cuZmluZCgnLmotY2hhbmdlLWl0ZW0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWM6XCIsIHJlc3BvbmNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidXR0b24ucmVtb3ZlQ2xhc3MoJ19hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmFkZENsYXNzKCdfc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZVN0YXR1cygkc3RhdHVzLCAkcm93LCByZXNwb25jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlc3BvbmNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycjpcIiwgcmVzcG9uY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJ1dHRvbi5yZW1vdmVDbGFzcygnX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRidXR0b24uYWRkQ2xhc3MoJ19mYWlsZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNoYW5nZVN0YXR1cygkc3RhdHVzLCAkcm93LCByZXNwb25jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pKCQodGhpcykpO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxufSkoZG9jdW1lbnQuYm9keSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBhcHAuaW5pdCgpO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
